import { Meta } from '@storybook/blocks';
import { Callout } from '../../components/Callout';
import { CodeBlock } from '../../components/CodeBlock';
import { ComparisonTable } from '../../components/ComparisonTable';
import { DataTable } from '../../components/DataTable';
import { Quiz } from '../../components/Quiz';
import { ChapterNav } from '../../components/ChapterNav';

<Meta title="Part 6: 모범 사례/팀 협업" />

# 팀 협업

> AI 코드와 팀 워크플로우의 통합

## AI 코드의 책임

<Callout type="important" title="핵심 원칙">
  AI가 생성한 코드의 최종 책임은 항상 커밋한 개발자에게 있습니다.
</Callout>

### 책임 체계

| 역할 | 책임 |
|------|------|
| **코드 작성자** | AI 생성 코드 검토, 이해, 커밋 |
| **코드 리뷰어** | AI 코드 포함 전체 PR 리뷰 |
| **팀 리드** | AI 활용 가이드라인 수립/관리 |
| **보안 담당** | AI 코드 보안 정책 수립/검증 |

## PR에서의 AI 사용 표기

<CodeBlock
  code={`## PR 설명

### AI 지원 여부
- [x] 이 PR은 AI 에이전트의 도움을 받아 작성되었습니다

### AI 사용 내역
- 보일러플레이트 생성: UserController, UserService
- 테스트 케이스 초안: user.service.test.ts
- 리팩토링 제안 적용: utils/validation.ts

### 개발자 검증
- [x] 모든 AI 생성 코드를 직접 검토했습니다
- [x] 코드의 동작을 이해하고 설명할 수 있습니다
- [x] 보안 취약점을 확인했습니다
- [x] 테스트를 실행하여 검증했습니다`}
  language="markdown"
  filename="PR 템플릿 예시"
/>

## 코드 리뷰 규칙

### AI 코드 리뷰 시 추가 확인사항

<ComparisonTable
  title="일반 코드 vs AI 코드 리뷰"
  headers={['항목', '일반 코드', 'AI 생성 코드']}
  rows={[
    { feature: '기능 검증', values: ['yes', 'yes'] },
    { feature: '코딩 컨벤션', values: ['yes', 'yes'] },
    { feature: '보안 검사', values: ['yes', 'yes (강화)'] },
    { feature: '코드 이해도 확인', values: ['partial', 'yes (필수)'] },
    { feature: '과도한 복잡성 확인', values: ['partial', 'yes (필수)'] },
    { feature: '불필요한 코드 확인', values: ['partial', 'yes (필수)'] },
    { feature: 'AI 환각 검사', values: ['no', 'yes'] },
  ]}
/>

<Callout type="warning" title="AI 환각 (Hallucination) 주의">
  AI가 존재하지 않는 API, 라이브러리, 메서드를 사용하는 코드를 생성할 수 있습니다.
  코드 리뷰 시 모든 import와 API 호출이 실제로 존재하는지 확인하세요.
</Callout>

## 팀 교육

### 효과적인 AI 활용을 위한 교육 체계

<DataTable
  title="AI 활용 교육 로드맵"
  searchable={true}
  columns={[
    { key: 'stage', header: '단계' },
    { key: 'content', header: '교육 내용' },
    { key: 'target', header: '대상' },
    { key: 'duration', header: '기간' },
    { key: 'goal', header: '목표' },
  ]}
  data={[
    { stage: '기초', content: '바이브 코딩 개념, 도구 설치, 기본 사용법', target: '전체 팀', duration: '1주', goal: '기본 명령어 실행 가능' },
    { stage: '실전', content: '프롬프트 작성법, 슬래시 커맨드 활용', target: '개발자', duration: '2주', goal: '일상 업무에 AI 활용' },
    { stage: '심화', content: '커스터마이징, 보안 검증, 스킬 제작', target: '시니어/리드', duration: '2주', goal: '팀 맞춤 설정 구축' },
    { stage: '관리', content: '가이드라인 수립, 효과 측정, ROI 분석', target: '매니저', duration: '지속', goal: '조직 차원 AI 전략 수립' },
  ]}
/>

### 지식 공유

<CodeBlock
  code={`## 팀 내 AI 활용 지식 공유 방법

1. 프롬프트 라이브러리 공유
   - .agent/prompts/ 디렉토리에 검증된 프롬프트 추가
   - Git으로 버전 관리

2. 코드 리뷰에서 좋은 AI 활용 사례 공유
   - PR 코멘트에 "이 부분은 AI가 잘 생성한 예시"로 표기
   
3. 정기 세션
   - 주간/격주 "AI 활용 팁" 공유 미팅
   - 실패 사례도 공유 (더 중요!)

4. 팀 위키
   - 효과적인 프롬프트 패턴 문서화
   - AI 사용 FAQ 관리`}
  language="markdown"
  filename="지식 공유 방법"
/>

## 커밋 표기

<CodeBlock
  code={`# AI 지원 커밋 표기 (Co-Authored-By)
git commit -m "feat(auth): add JWT refresh token support

- Implement refresh token rotation
- Add token blacklist for logout

Co-Authored-By: Claude <noreply@anthropic.com>"`}
  language="bash"
  filename="AI 지원 커밋 예시"
/>

<Quiz
  title="팀 협업 이해도 확인"
  questions={[
    {
      question: 'AI 생성 코드를 PR에 포함할 때 해야 할 것은?',
      options: ['아무 표시 없이 커밋', 'AI 사용 내역을 PR에 명시', 'AI가 만든 파일만 별도 커밋', '리뷰 없이 바로 머지'],
      correctIndex: 1,
      explanation: 'AI 도움을 받은 코드는 PR에 AI 사용 여부와 구체적인 사용 내역을 명시하여 투명하게 관리합니다.',
    },
    {
      question: 'AI 코드 리뷰 시 일반 리뷰와 다른 추가 확인사항은?',
      options: ['코딩 컨벤션만 확인', '존재하지 않는 API 사용(AI 환각) 확인', '성능 벤치마크만 확인', '코드 라인 수만 확인'],
      correctIndex: 1,
      explanation: 'AI가 실제로 존재하지 않는 API, 라이브러리, 메서드를 사용하는 코드를 생성(환각)할 수 있으므로 이에 대한 검증이 추가로 필요합니다.',
    },
  ]}
/>

<ChapterNav
  prev={{ title: '보안', path: '/docs/part-6--모범-사례-보안' }}
  next={{ title: '효과 측정', path: '/docs/part-6--모범-사례-효과-측정' }}
/>
