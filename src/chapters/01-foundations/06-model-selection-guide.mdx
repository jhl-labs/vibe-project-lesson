import { Meta } from '@storybook/addon-docs/blocks';
import { Callout } from '../../components/Callout';
import { CodeBlock } from '../../components/CodeBlock';
import { ComparisonTable } from '../../components/ComparisonTable';
import { ChapterNav } from '../../components/ChapterNav';

<Meta title="Part 1: 기초/모델 선택 가이드" />

# Claude 모델 선택 가이드

> 작업 유형에 맞는 최적의 모델을 선택하는 방법

## 왜 모델 선택이 중요한가

Claude Code는 여러 모델을 지원하며, 모델에 따라 **추론 능력, 속도, 비용**이 크게 다릅니다. 올바른 모델 선택은 작업 품질과 비용 효율 모두에 직접적인 영향을 줍니다.

<Callout type="info" title="핵심 원칙">
  "가장 비싼 모델이 항상 최선은 아닙니다."
  간단한 리팩토링에 Opus 4.5를 사용하는 것은 비효율적이고,
  복잡한 아키텍처 설계에 Haiku 4.5를 사용하면 품질이 부족합니다.
</Callout>

## Claude 4.5 모델 패밀리

2025년 5월 Claude 4가 출시된 이후, 2025년 9월 Sonnet 4.5, 10월 Haiku 4.5, 11월 Opus 4.5가 순차적으로 공개되었습니다.

<ComparisonTable
  title="Claude 4.5 모델 비교"
  headers={['항목', 'Opus 4.5', 'Sonnet 4.5', 'Haiku 4.5']}
  rows={[
    { feature: '모델 ID', values: ['claude-opus-4-5-20251101', 'claude-sonnet-4-5-20250929', 'claude-haiku-4-5'] },
    { feature: '출시일', values: ['2025년 11월', '2025년 9월', '2025년 10월'] },
    { feature: '컨텍스트 윈도우', values: ['200K (1M 베타)', '200K (1M 베타)', '200K'] },
    { feature: '최대 출력', values: ['64,000 토큰', '64,000 토큰', '64,000 토큰'] },
    { feature: '입력 가격 (/1M 토큰)', values: ['$5', '$3', '$1'] },
    { feature: '출력 가격 (/1M 토큰)', values: ['$25', '$15', '$5'] },
    { feature: '강점', values: ['깊은 추론, 아키텍처', '균형 잡힌 성능', '빠른 속도, 저비용'] },
  ]}
/>

<Callout type="tip" title="가격 출처">
  모든 가격은 [Anthropic 공식 가격 페이지](https://docs.anthropic.com/en/docs/about-claude/pricing) 기준입니다 (200K 컨텍스트 이하).
  Sonnet 4.5는 200K 토큰 초과 시 입력 $6, 출력 $22.50으로 할증됩니다.
</Callout>

## 벤치마크 성능

<ComparisonTable
  title="SWE-bench Verified 점수 (코딩 벤치마크)"
  headers={['모델', '점수', '설명']}
  rows={[
    { feature: 'Opus 4.5', values: ['80.9%', '최고 수준의 코딩 성능'] },
    { feature: 'Sonnet 4.5', values: ['77.2%', '비용 대비 우수한 코딩 성능'] },
    { feature: 'Haiku 4.5', values: ['73.3%', '경량 모델 대비 높은 코딩 성능'] },
  ]}
/>

<Callout type="info" title="벤치마크 출처">
  SWE-bench Verified 점수는 [Anthropic 공식 발표](https://www.anthropic.com/news/claude-opus-4-5) 및 [Caylent 분석](https://caylent.com/blog/claude-sonnet-4-5-highest-scoring-claude-model-yet-on-swe-bench)을 기반으로 합니다.
</Callout>

## 작업별 모델 추천

<ComparisonTable
  title="작업 유형별 권장 모델"
  headers={['작업 유형', '권장 모델', '이유']}
  rows={[
    { feature: '아키텍처 설계/리팩토링', values: ['Opus 4.5', '깊은 추론 능력, 복잡한 의존성 분석'] },
    { feature: '디버깅 (복잡한 버그)', values: ['Opus 4.5', '다단계 추론, 근본 원인 분석'] },
    { feature: '새 기능 구현', values: ['Sonnet 4.5', '성능과 비용의 균형'] },
    { feature: '코드 리뷰', values: ['Sonnet 4.5', '충분한 추론 + 합리적 비용'] },
    { feature: '테스트 작성', values: ['Sonnet 4.5', '패턴 인식 + 빠른 응답'] },
    { feature: '보일러플레이트 생성', values: ['Haiku 4.5', '빠른 속도, 반복 작업에 최적'] },
    { feature: '문서 작성/번역', values: ['Haiku 4.5', '텍스트 처리에 충분한 성능'] },
    { feature: '간단한 수정/리팩토링', values: ['Haiku 4.5', '비용 효율적, 빠른 턴어라운드'] },
  ]}
/>

## Claude Code에서 모델 변경하기

<CodeBlock
  code={`# 1. 실행 시 모델 지정
claude --model opus

# 2. 세션 중 모델 변경
/model sonnet

# 3. 환경 변수로 기본 모델 설정
export ANTHROPIC_MODEL=claude-opus-4-5-20251101

# 4. 모델 별칭 사용 (간단한 이름)
claude --model opus     # claude-opus-4-5 최신 버전
claude --model sonnet   # claude-sonnet-4-5 최신 버전
claude --model haiku    # claude-haiku-4-5 최신 버전`}
  language="bash"
  filename="모델 선택 방법"
/>

<Callout type="info" title="모델 설정 문서">
  모델 설정에 대한 자세한 내용은 [Claude Code 공식 문서](https://code.claude.com/docs/en/model-config)를 참조하세요.
</Callout>

## Extended Thinking (확장 사고)

Claude 4.x 모델은 **Extended Thinking** 기능을 지원합니다. 복잡한 문제에서 Claude가 답변 전에 단계별로 사고하는 과정을 거치게 하여 정확도를 높입니다.

### 핵심 개념

| 항목 | 설명 |
|------|------|
| **budget_tokens** | 사고에 할당할 최대 토큰 수 (최소 1,024) |
| **Interleaved Thinking** | Claude 4 전용. 에이전트 코딩 시 도구 호출 사이에도 사고를 유지 |
| **비용** | 사고 토큰도 출력 토큰으로 과금됨 |

<CodeBlock
  code={`# Claude Code에서는 Extended Thinking이 자동으로 활용됩니다.
# 복잡한 문제에서 단계적 사고를 유도하는 프롬프트:

"이 문제를 해결하기 전에 가능한 접근 방식들을 나열하고,
각각의 장단점을 분석한 뒤 최선의 방법을 선택해줘"

# API 직접 사용 시 (참고)
# thinking: { type: "enabled", budget_tokens: 10000 }`}
  language="text"
  filename="Extended Thinking 활용"
/>

<Callout type="tip" title="Extended Thinking 문서">
  Extended Thinking에 대한 기술적 세부사항은 [Anthropic 공식 문서](https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking)를 참조하세요.
</Callout>

## 비용 최적화 전략

### 1. 작업에 맞는 모델 선택

같은 작업이라도 모델에 따라 비용이 5배 이상 차이납니다.

| 시나리오 | Opus 4.5 예상 비용 | Haiku 4.5 예상 비용 | 절감률 |
|----------|-------------------|-------------------|--------|
| 보일러플레이트 생성 (1K 출력) | $0.025 | $0.005 | 80% |
| 코드 리뷰 (5K 입력 + 2K 출력) | $0.075 | $0.015 | 80% |

### 2. 구독 플랜 활용

<ComparisonTable
  title="구독 vs API 비용 비교"
  headers={['사용 방식', '월 비용', '적합한 사용자']}
  rows={[
    { feature: 'Pro ($20/월)', values: ['$20 고정', '가벼운 사용, Sonnet 4.5 기본'] },
    { feature: 'Max 5x ($100/월)', values: ['$100 고정', '일반적 개발자, Opus 4.5 포함'] },
    { feature: 'Max 20x ($200/월)', values: ['$200 고정', '헤비 유저, 대량 사용'] },
    { feature: 'API (종량제)', values: ['사용량 비례', '자동화, CI/CD, 팀 인프라'] },
  ]}
/>

### 3. 세션 내 모델 전환

<CodeBlock
  code={`# 복잡한 설계는 Opus로
/model opus
"이 결제 시스템의 아키텍처를 설계해줘"

# 구현은 Sonnet으로 전환
/model sonnet
"설계에 따라 PaymentService를 구현해줘"

# 반복 작업은 Haiku로
/model haiku
"나머지 CRUD 엔드포인트의 테스트를 작성해줘"`}
  language="text"
  filename="세션 내 모델 전환 패턴"
/>

## 모델 선택 의사결정 흐름

일반적인 의사결정 기준:

1. **"이 작업이 복잡한 추론을 필요로 하는가?"** → Yes: Opus 4.5
2. **"코드 품질과 비용 균형이 중요한가?"** → Yes: Sonnet 4.5
3. **"빠른 속도와 낮은 비용이 우선인가?"** → Yes: Haiku 4.5
4. **"잘 모르겠다"** → Sonnet 4.5 (Claude Code 기본값)

<Callout type="warning" title="Opus 4.5 과잉 설계 주의">
  Opus 4.5는 불필요한 추상화나 추가 파일을 생성하는 경향이 있습니다.
  CLAUDE.md에 "과도한 엔지니어링을 피하세요. 직접 요청되었거나 명확히 필요한 변경만 하세요."를
  추가하면 이 문제를 완화할 수 있습니다.
</Callout>

<ChapterNav
  prev={{ title: '프롬프트 엔지니어링', path: '/docs/part-1--기초-프롬프트-엔지니어링' }}
  next={{ title: '개발 환경 설정', path: '/docs/part-1--기초-개발-환경-설정' }}
/>
