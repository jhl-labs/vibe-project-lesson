# AI Agent 사용 가이드라인

> 엔터프라이즈 환경에서의 AI Agent 활용 규칙

## 개요

이 문서는 AI Agent(Claude, Cursor, Roo Code 등)를 활용한 개발 시 준수해야 할 규칙과 모범 사례를 정의합니다.

## 핵심 원칙

### 1. 책임 소재

```
┌─────────────────────────────────────────────────────────┐
│  AI 생성 코드의 최종 책임은 커밋한 개발자에게 있습니다  │
└─────────────────────────────────────────────────────────┘
```

- AI가 생성한 코드라도 개발자가 검토하고 커밋하면 해당 개발자의 책임
- "AI가 만들어준 코드"는 면책 사유가 되지 않음
- 이해하지 못한 코드는 커밋하지 않음

### 2. 검증 필수

모든 AI 생성 코드는 다음 검증 절차를 거쳐야 합니다:

```
AI 코드 생성 → 개발자 검토 → 단위 테스트 → 보안 스캔 → 코드 리뷰 → 머지
```

## 허용되는 사용 사례

### ✅ 권장

| 사용 사례 | 설명 | 예시 |
|-----------|------|------|
| 보일러플레이트 생성 | 반복적인 구조 코드 | CRUD API, 폼 컴포넌트 |
| 테스트 케이스 초안 | 테스트 코드 시작점 | 단위 테스트, 모킹 코드 |
| 문서화 보조 | 문서 초안 작성 | JSDoc, README, API 문서 |
| 코드 리뷰 1차 검토 | 잠재적 이슈 식별 | 버그 탐지, 스타일 검사 |
| 리팩토링 제안 | 코드 개선 아이디어 | 중복 제거, 패턴 적용 |
| 버그 원인 분석 | 디버깅 지원 | 에러 추적, 로그 분석 |
| 학습 및 설명 | 코드 이해 지원 | 복잡한 로직 설명 |
| 프로토타이핑 | 빠른 검증 | PoC 코드, 실험적 기능 |

### ✅ 허용 (주의 필요)

| 사용 사례 | 주의사항 |
|-----------|----------|
| 알고리즘 구현 | 정확성 검증 필수 |
| DB 쿼리 작성 | 성능 및 보안 검토 필수 |
| API 설계 | 아키텍처 검토 필수 |
| 설정 파일 생성 | 보안 설정 검토 필수 |

## 금지되는 사용 사례

### ❌ 절대 금지

| 금지 사례 | 이유 | 대안 |
|-----------|------|------|
| 보안 코드 무검증 적용 | 취약점 위험 | 보안팀 검토 필수 |
| 프로덕션 데이터 프롬프트 | 데이터 유출 위험 | 익명화/가상 데이터 사용 |
| 시크릿 노출 | 보안 사고 | 환경 변수 참조만 |
| 라이선스 불명 코드 복사 | 법적 위험 | 오픈소스 라이선스 확인 |
| 개인정보 포함 프롬프트 | 개인정보보호법 위반 | PII 제거 |

### ❌ 주의 필요

| 사례 | 위험 | 완화 방법 |
|------|------|----------|
| 암호화 로직 생성 | 취약한 구현 위험 | 검증된 라이브러리 사용 |
| 인증/인가 로직 | 보안 허점 | 보안 리뷰 필수 |
| 금융 계산 로직 | 정확도 문제 | 철저한 테스트 |
| 규정 준수 코드 | 법적 요구사항 미충족 | 법무 검토 |

## 프롬프트 작성 가이드

### 효과적인 프롬프트

```markdown
## 좋은 프롬프트 예시

다음 조건을 만족하는 사용자 인증 서비스를 구현해주세요:

### 요구사항
- JWT 기반 인증
- 리프레시 토큰 지원
- bcrypt로 비밀번호 해싱 (cost factor: 12)

### 기술 스택
- TypeScript
- Express.js
- PostgreSQL

### 제약사항
- 기존 User 엔터티 사용
- 에러 처리는 AppError 클래스 사용
- 테스트 코드 포함

### 참고
- 기존 코드: src/services/base-service.ts
- 컨벤션: .agent/conventions.md 참조
```

### 피해야 할 프롬프트

```markdown
## 나쁜 프롬프트 예시

❌ "로그인 기능 만들어줘"
   → 너무 모호함, 요구사항 불명확

❌ "이 에러 고쳐줘: [프로덕션 로그 전체 복사]"
   → 민감한 데이터 포함 가능

❌ "AWS_SECRET_KEY=xxx 이거 사용해서 S3 연동해줘"
   → 시크릿 노출

❌ "경쟁사 코드 참고해서 비슷하게 만들어줘"
   → 저작권 문제
```

### 컨텍스트 제공

```markdown
## 컨텍스트 포함 프롬프트

### 프로젝트 정보
- 아키텍처: 클린 아키텍처
- 언어: TypeScript (strict mode)
- 테스트: Jest

### 관련 파일
- src/domain/user/entity.ts
- src/application/user/use-cases.ts

### 요청
UserService에 비밀번호 재설정 기능을 추가해주세요.
기존 패턴과 일관되게 구현해주세요.
```

## AI 생성 코드 검증

### 검증 체크리스트

```markdown
## 코드 리뷰 시 확인사항

### 기능
- [ ] 요구사항을 정확히 구현했는가?
- [ ] 엣지 케이스가 처리되었는가?
- [ ] 에러 핸들링이 적절한가?

### 보안
- [ ] 입력 검증이 있는가?
- [ ] SQL/XSS 인젝션 취약점이 없는가?
- [ ] 인증/인가가 적절한가?
- [ ] 민감 정보가 노출되지 않는가?

### 품질
- [ ] 코딩 컨벤션을 따르는가?
- [ ] 중복 코드가 없는가?
- [ ] 테스트가 작성되었는가?

### 이해도
- [ ] 코드의 동작을 이해했는가?
- [ ] 왜 이렇게 구현되었는지 설명할 수 있는가?
```

### 자동 검증

```yaml
# CI에서 자동 검사
- 린트 검사
- 타입 체크
- 단위 테스트
- 보안 스캔 (SAST)
- 의존성 취약점 검사
```

## 팀 협업

### 코드 리뷰 시 표기

AI 도움을 받은 코드는 PR에 명시:

```markdown
## PR 설명

### AI 지원 여부
- [x] 이 PR은 AI 에이전트의 도움을 받아 작성되었습니다

### AI 사용 내역
- 보일러플레이트 생성: UserController
- 테스트 케이스 초안: user.service.test.ts
- 리팩토링 제안 적용: utils/validation.ts
```

### 지식 공유

```markdown
## 유용한 프롬프트 공유

팀 내에서 효과적인 프롬프트를 공유하고 재사용하세요:

1. 팀 위키에 프롬프트 템플릿 등록
2. 코드 리뷰에서 좋은 AI 활용 사례 공유
3. 정기적인 AI 활용 팁 세션
```

## 모니터링 및 감사

### 추적 가능성

- 모든 커밋은 개발자 정보와 함께 기록
- AI 사용 여부는 PR에서 자발적 표기
- 문제 발생 시 커밋 이력으로 추적 가능

### 정기 검토

```markdown
## 분기별 검토 항목

1. AI 생성 코드 품질 평가
2. 보안 이슈 발생 여부
3. 생산성 향상 측정
4. 가이드라인 준수 여부
5. 필요시 가이드라인 업데이트
```

## 문제 발생 시 대응

### 보안 이슈 발견

```
1. 즉시 보안팀에 보고
2. 해당 코드 배포 중단
3. 근본 원인 분석
4. 수정 및 재배포
5. 재발 방지 대책 수립
```

### 품질 이슈 발견

```
1. 이슈 기록 및 분류
2. 원인 분석 (AI 생성 vs 검토 누락)
3. 수정
4. 검증 프로세스 개선
```

## 참고 자료

- [OpenAI Usage Policies](https://openai.com/policies/usage-policies)
- [Anthropic Acceptable Use Policy](https://www.anthropic.com/policies/aup)
- [GitHub Copilot Trust Center](https://resources.github.com/copilot-trust-center/)
- [프로젝트 보안 정책](../../SECURITY.md)

---

**마지막 업데이트**: `<날짜>`
**담당자**: `<관리자>`
**검토 주기**: 분기별
